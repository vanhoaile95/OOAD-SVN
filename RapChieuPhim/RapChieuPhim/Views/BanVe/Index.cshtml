@model PagedList.IPagedList<DataEntityFramework.BanVeJoinTable>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section LoginText{
    @Html.Partial("~/Views/Home/LoginTextPartial.cshtml")
}

@using (Html.BeginForm())
{
    <div>
        <br />
        <h2 style="color:navy; font-size:xx-large " class="text-center">
            Danh sách lịch chiếu phim
        </h2>
        <br />
    </div>

    <div>
        <table id="content-table" class="table table-striped table-bordered ">
            <thead>
                <tr style="font-size:x-large">
                    <th class="Tenphim" style="text-align:center">
                        Tên phim <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Tenphim', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Tenphim', 'content-table');">&#8681;</a>
                    </th>
                    <th class="Phienban" style="text-align:center">
                        Phiên bản <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Phienban', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Phienban', 'content-table');">&#8681;</a>
                    </th>
                    <th class="Ngaychieu" style="text-align:center">
                        Ngày chiếu <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Ngaychieu', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Ngaychieu', 'content-table');">&#8681;</a>
                    </th>
                    <th class="Batdau" style="text-align:center">
                        Bắt đầu <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Batdau', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Batdau', 'content-table');">&#8681;</a>
                    </th>
                    <th class="Ketthuc" style="text-align:center">
                        Kết thúc <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Ketthuc', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Ketthuc', 'content-table');">&#8681;</a>
                    </th>
                    <th class="Phongchieu" style="text-align:center">
                        Phòng <a style="font-size:x-large; float:right" href="javascript:sort(true, 'Phongchieu', 'content-table');">&#8679;</a> <a style="font-size:x-large; float:right" href="javascript:sort(false, 'Phongchieu', 'content-table');">&#8681;</a>
                    </th>
                    <th class="text-center">Bán vé</th>
                </tr>
            </thead>
            <tbody>
                @{
                    string tenphim = "";
                    foreach (var item in Model)
                    {
                            if (@item.TENPHIM.Length > 18)
                            {
                                tenphim = @item.TENPHIM.Substring(0, 17) + "..";
                            }
                            else
                            {
                                tenphim = @item.TENPHIM;
                            }

                            <tr class="text-center">
                                <td style="font-size:large; color:black;" class="Tenphim">@tenphim</td>
                                <td style="font-size: large; color: black;" class="Phienban">@item.PHIENBAN</td>
                                <td style="font-size: large; color: black;" class="Ngaychieu">@string.Format("{0:dd/MM/yyyy}", @item.NGAYCHIEU)</td>
                                <td style="font-size: large; color: black;" class="Batdau">@item.GIOBATDAU</td>
                                <td style="font-size: large; color: black;" class="Ketthuc">@item.GIOKETTHUC</td>
                                <td style="font-size: large; color: black;" class="Phongchieu">@item.TENPHONGCHIEU</td>
                                <td class="text-center"> <a href="@Url.Action("LoadGhe", "BanVe", new {@MaLichChieu = item.MALICHCHIEU })" class="btn btn-success">Chọn</a> </td>

                            </tr>
                    }
                }
            <tbody>
        </table>
        <div class="text-center">
            @Html.PagedListPager(Model, Page => Url.Action("Index", new { Page }));
        </div>

    </div>


}



<script type="text/javascript">
 // sắp xếp tăng giảm
    function sort(ascending, columnClassName, tableId) {
        var tbody = document.getElementById(tableId).getElementsByTagName(
                "tbody")[0];
        var rows = tbody.getElementsByTagName("tr");

        var unsorted = true;

        while (unsorted) {
            unsorted = false

            for (var r = 0; r < rows.length - 1; r++) {
                var row = rows[r];
                var nextRow = rows[r + 1];

                var value = row.getElementsByClassName(columnClassName)[0].innerHTML;
                var nextValue = nextRow.getElementsByClassName(columnClassName)[0].innerHTML;

                value = value.replace(',', '.'); // in case a comma is used in float number
                nextValue = nextValue.replace(',', '.');

                if (!isNaN(value)) {
                    value = parseFloat(value);
                    nextValue = parseFloat(nextValue);
                }

                if (ascending ? value > nextValue : value < nextValue) {
                    tbody.insertBefore(nextRow, row);
                    unsorted = true;
                }
            }
        }
    };
</script>